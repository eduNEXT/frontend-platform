{"version":3,"file":"createJwtTokenProviderInterceptor.js","names":["createJwtTokenProviderInterceptor","options","jwtTokenService","shouldSkip","interceptor","axiosRequestConfig","getJwtToken","requestError","Object","create","message","config","Promise","reject","headers","common"],"sources":["../../../src/auth/interceptors/createJwtTokenProviderInterceptor.js"],"sourcesContent":["const createJwtTokenProviderInterceptor = (options) => {\n  const {\n    jwtTokenService,\n    shouldSkip,\n  } = options;\n\n  // Creating the interceptor inside this closure to\n  // maintain reference to the options supplied.\n  const interceptor = async (axiosRequestConfig) => {\n    if (shouldSkip(axiosRequestConfig)) {\n      return axiosRequestConfig;\n    }\n\n    // Important: the job of this interceptor is to refresh a jwt token and update\n    // the original request configuration. Errors thrown from fetching the jwt\n    // should contain the original request config. This allows other interceptors\n    // (namely our retry request interceptor below) to access the original request\n    // and handle it appropriately\n    try {\n      await jwtTokenService.getJwtToken();\n    } catch (error) {\n      const requestError = Object.create(error);\n      requestError.message = `[getJwtToken] ${requestError.message}`;\n      // Important: return the original axios request config\n      requestError.config = axiosRequestConfig;\n      return Promise.reject(requestError);\n    }\n\n    // Add the proper headers to tell the server to look for the jwt cookie\n    // eslint-disable-next-line no-param-reassign\n    axiosRequestConfig.headers.common['USE-JWT-COOKIE'] = true;\n    return axiosRequestConfig;\n  };\n\n  return interceptor;\n};\n\nexport default createJwtTokenProviderInterceptor;\n"],"mappings":";+CACA;AAAA;AAAA;AADA,IAAMA,iCAAiC,GAAG,SAApCA,iCAAiC,CAAIC,OAAO,EAAK;EACrD,IACEC,eAAe,GAEbD,OAAO,CAFTC,eAAe;IACfC,UAAU,GACRF,OAAO,CADTE,UAAU;;EAGZ;EACA;EACA,IAAMC,WAAW;IAAA,sEAAG,iBAAOC,kBAAkB;MAAA;MAAA;QAAA;UAAA;YAAA,KACvCF,UAAU,CAACE,kBAAkB,CAAC;cAAA;cAAA;YAAA;YAAA,iCACzBA,kBAAkB;UAAA;YAAA;YAAA;YAAA,OASnBH,eAAe,CAACI,WAAW,EAAE;UAAA;YAAA;YAAA;UAAA;YAAA;YAAA;YAE7BC,YAAY,GAAGC,MAAM,CAACC,MAAM,aAAO;YACzCF,YAAY,CAACG,OAAO,2BAAoBH,YAAY,CAACG,OAAO,CAAE;YAC9D;YACAH,YAAY,CAACI,MAAM,GAAGN,kBAAkB;YAAC,iCAClCO,OAAO,CAACC,MAAM,CAACN,YAAY,CAAC;UAAA;YAGrC;YACA;YACAF,kBAAkB,CAACS,OAAO,CAACC,MAAM,CAAC,gBAAgB,CAAC,GAAG,IAAI;YAAC,iCACpDV,kBAAkB;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA,CAC1B;IAAA,gBAxBKD,WAAW;MAAA;IAAA;EAAA,GAwBhB;EAED,OAAOA,WAAW;AACpB,CAAC;AAED,eAAeJ,iCAAiC"}