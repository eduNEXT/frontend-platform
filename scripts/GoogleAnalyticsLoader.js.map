{"version":3,"file":"GoogleAnalyticsLoader.js","names":["GoogleAnalyticsLoader","constructor","_ref","config","analyticsId","GOOGLE_ANALYTICS_4_ID","loadScript","global","googleAnalytics","invoked","load","key","options","scriptSrc","document","createElement","type","async","src","scriptGtag","innerHTML","first","getElementsByTagName","parentNode","insertBefore","_loadOptions"],"sources":["../../src/scripts/GoogleAnalyticsLoader.js"],"sourcesContent":["/**\n * @implements {GoogleAnalyticsLoader}\n * @memberof module:GoogleAnalytics\n */\nclass GoogleAnalyticsLoader {\n  constructor({ config }) {\n    this.analyticsId = config.GOOGLE_ANALYTICS_4_ID;\n  }\n\n  loadScript() {\n    if (!this.analyticsId) {\n      return;\n    }\n\n    global.googleAnalytics = global.googleAnalytics || [];\n    const { googleAnalytics } = global;\n\n    // If the snippet was invoked do nothing.\n    if (googleAnalytics.invoked) {\n      return;\n    }\n\n    // Invoked flag, to make sure the snippet\n    // is never invoked twice.\n    googleAnalytics.invoked = true;\n\n    googleAnalytics.load = (key, options) => {\n      const scriptSrc = document.createElement('script');\n      scriptSrc.type = 'text/javascript';\n      scriptSrc.async = true;\n      scriptSrc.src = `https://www.googletagmanager.com/gtag/js?id=${key}`;\n\n      const scriptGtag = document.createElement('script');\n      scriptGtag.innerHTML = `\n        window.dataLayer = window.dataLayer || [];\n        function gtag(){dataLayer.push(arguments);}\n        gtag('js', new Date());\n        gtag('config', '${key}');\n      `;\n\n      // Insert our scripts next to the first script element.\n      const first = document.getElementsByTagName('script')[0];\n      first.parentNode.insertBefore(scriptSrc, first);\n      first.parentNode.insertBefore(scriptGtag, first);\n      googleAnalytics._loadOptions = options; // eslint-disable-line no-underscore-dangle\n    };\n\n    // Load GoogleAnalytics with your key.\n    googleAnalytics.load(this.analyticsId);\n  }\n}\n\nexport default GoogleAnalyticsLoader;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAMA,qBAAqB,CAAC;EAC1BC,WAAWA,CAAAC,IAAA,EAAa;IAAA,IAAZ;MAAEC;IAAO,CAAC,GAAAD,IAAA;IACpB,IAAI,CAACE,WAAW,GAAGD,MAAM,CAACE,qBAAqB;EACjD;EAEAC,UAAUA,CAAA,EAAG;IACX,IAAI,CAAC,IAAI,CAACF,WAAW,EAAE;MACrB;IACF;IAEAG,MAAM,CAACC,eAAe,GAAGD,MAAM,CAACC,eAAe,IAAI,EAAE;IACrD,MAAM;MAAEA;IAAgB,CAAC,GAAGD,MAAM;;IAElC;IACA,IAAIC,eAAe,CAACC,OAAO,EAAE;MAC3B;IACF;;IAEA;IACA;IACAD,eAAe,CAACC,OAAO,GAAG,IAAI;IAE9BD,eAAe,CAACE,IAAI,GAAG,CAACC,GAAG,EAAEC,OAAO,KAAK;MACvC,MAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAClDF,SAAS,CAACG,IAAI,GAAG,iBAAiB;MAClCH,SAAS,CAACI,KAAK,GAAG,IAAI;MACtBJ,SAAS,CAACK,GAAG,GAAI,+CAA8CP,GAAI,EAAC;MAEpE,MAAMQ,UAAU,GAAGL,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MACnDI,UAAU,CAACC,SAAS,GAAI;AAC9B;AACA;AACA;AACA,0BAA0BT,GAAI;AAC9B,OAAO;;MAED;MACA,MAAMU,KAAK,GAAGP,QAAQ,CAACQ,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;MACxDD,KAAK,CAACE,UAAU,CAACC,YAAY,CAACX,SAAS,EAAEQ,KAAK,CAAC;MAC/CA,KAAK,CAACE,UAAU,CAACC,YAAY,CAACL,UAAU,EAAEE,KAAK,CAAC;MAChDb,eAAe,CAACiB,YAAY,GAAGb,OAAO,CAAC,CAAC;IAC1C,CAAC;;IAED;IACAJ,eAAe,CAACE,IAAI,CAAC,IAAI,CAACN,WAAW,CAAC;EACxC;AACF;AAEA,eAAeJ,qBAAqB","ignoreList":[]}