{"version":3,"file":"MockAnalyticsService.js","names":["MockAnalyticsService","httpClient","loggingService","jest","fn","hasIdentifyBeenCalled","logError","Promise","resolve","userId","Error","checkIdentifyCalled"],"sources":["../../src/analytics/MockAnalyticsService.js"],"sourcesContent":["/**\n * The MockAnalyticsService implements all functions of AnalyticsService as Jest mocks (jest.fn())).\n * It emulates the behavior of a real analytics service but witohut making any requests. It has no\n * other functionality.\n *\n * @implements {AnalyticsService}\n * @memberof module:Analytics\n */\nclass MockAnalyticsService {\n  static hasIdentifyBeenCalled = false;\n\n  constructor({ httpClient, loggingService }) {\n    this.loggingService = loggingService;\n    this.httpClient = httpClient;\n  }\n\n  checkIdentifyCalled = jest.fn(() => {\n    if (!this.hasIdentifyBeenCalled) {\n      this.loggingService.logError('Identify must be called before other tracking events.');\n    }\n  });\n\n  /**\n   * Returns a resolved promise.\n   *\n   * @returns {Promise} The promise returned by HttpClient.post.\n   */\n  sendTrackingLogEvent = jest.fn(() => Promise.resolve());\n\n  /**\n   * No-op, but records that identify has been called.\n   *\n   * @param {string} userId\n   * @throws {Error} If userId argument is not supplied.\n   */\n  identifyAuthenticatedUser = jest.fn((userId) => {\n    if (!userId) {\n      throw new Error('UserId is required for identifyAuthenticatedUser.');\n    }\n    this.hasIdentifyBeenCalled = true;\n  });\n\n  /**\n   * No-op, but records that it has been called to prevent double-identification.\n   * @returns {Promise} A resolved promise.\n   */\n  identifyAnonymousUser = jest.fn(() => {\n    this.hasIdentifyBeenCalled = true;\n    return Promise.resolve();\n  });\n\n  /**\n   * Logs the event to the console.\n   *\n   * Checks whether identify has been called, logging an error to the logging service if not.\n   */\n  sendTrackEvent = jest.fn(() => {\n    this.checkIdentifyCalled();\n  });\n\n  /**\n   * Logs the event to the console.\n   *\n   * Checks whether identify has been called, logging an error to the logging service if not.\n   */\n  sendPageEvent = jest.fn(() => {\n    this.checkIdentifyCalled();\n  });\n}\n\nexport default MockAnalyticsService;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA,IAQMA,oBAAoB,6BAGxB,oCAA4C;EAAA;EAAA,IAA9BC,UAAU,QAAVA,UAAU;IAAEC,cAAc,QAAdA,cAAc;EAAA;EAAA,6CAKlBC,IAAI,CAACC,EAAE,CAAC,YAAM;IAClC,IAAI,CAAC,KAAI,CAACC,qBAAqB,EAAE;MAC/B,KAAI,CAACH,cAAc,CAACI,QAAQ,CAAC,uDAAuD,CAAC;IACvF;EACF,CAAC,CAAC;EAAA,8CAOqBH,IAAI,CAACC,EAAE,CAAC;IAAA,OAAMG,OAAO,CAACC,OAAO,EAAE;EAAA,EAAC;EAAA,mDAQ3BL,IAAI,CAACC,EAAE,CAAC,UAACK,MAAM,EAAK;IAC9C,IAAI,CAACA,MAAM,EAAE;MACX,MAAM,IAAIC,KAAK,CAAC,mDAAmD,CAAC;IACtE;IACA,KAAI,CAACL,qBAAqB,GAAG,IAAI;EACnC,CAAC,CAAC;EAAA,+CAMsBF,IAAI,CAACC,EAAE,CAAC,YAAM;IACpC,KAAI,CAACC,qBAAqB,GAAG,IAAI;IACjC,OAAOE,OAAO,CAACC,OAAO,EAAE;EAC1B,CAAC,CAAC;EAAA,wCAOeL,IAAI,CAACC,EAAE,CAAC,YAAM;IAC7B,KAAI,CAACO,mBAAmB,EAAE;EAC5B,CAAC,CAAC;EAAA,uCAOcR,IAAI,CAACC,EAAE,CAAC,YAAM;IAC5B,KAAI,CAACO,mBAAmB,EAAE;EAC5B,CAAC,CAAC;EAvDA,IAAI,CAACT,cAAc,GAAGA,cAAc;EACpC,IAAI,CAACD,UAAU,GAAGA,UAAU;AAC9B,CAAC;AAAA,gBANGD,oBAAoB,2BACO,KAAK;AA6DtC,eAAeA,oBAAoB"}