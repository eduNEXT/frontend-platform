{"version":3,"file":"createJwtTokenProviderInterceptor.js","names":["createJwtTokenProviderInterceptor","options","jwtTokenService","shouldSkip","interceptor","axiosRequestConfig","getJwtToken","error","requestError","Object","create","message","config","Promise","reject","headers"],"sources":["../../../src/auth/interceptors/createJwtTokenProviderInterceptor.js"],"sourcesContent":["const createJwtTokenProviderInterceptor = (options) => {\n  const {\n    jwtTokenService,\n    shouldSkip,\n  } = options;\n\n  // Creating the interceptor inside this closure to\n  // maintain reference to the options supplied.\n  const interceptor = async (axiosRequestConfig) => {\n    if (shouldSkip(axiosRequestConfig)) {\n      return axiosRequestConfig;\n    }\n\n    // Important: the job of this interceptor is to refresh a jwt token and update\n    // the original request configuration. Errors thrown from fetching the jwt\n    // should contain the original request config. This allows other interceptors\n    // (namely our retry request interceptor below) to access the original request\n    // and handle it appropriately\n    try {\n      await jwtTokenService.getJwtToken();\n    } catch (error) {\n      const requestError = Object.create(error);\n      requestError.message = `[getJwtToken] ${requestError.message}`;\n      // Important: return the original axios request config\n      requestError.config = axiosRequestConfig;\n      return Promise.reject(requestError);\n    }\n\n    // Add the proper headers to tell the server to look for the jwt cookie\n    // eslint-disable-next-line no-param-reassign\n    axiosRequestConfig.headers['USE-JWT-COOKIE'] = true;\n    return axiosRequestConfig;\n  };\n\n  return interceptor;\n};\n\nexport default createJwtTokenProviderInterceptor;\n"],"mappings":"AAAA,MAAMA,iCAAiC,GAAIC,OAAO,IAAK;EACrD,MAAM;IACJC,eAAe;IACfC;EACF,CAAC,GAAGF,OAAO;;EAEX;EACA;EACA,MAAMG,WAAW,GAAG,MAAOC,kBAAkB,IAAK;IAChD,IAAIF,UAAU,CAACE,kBAAkB,CAAC,EAAE;MAClC,OAAOA,kBAAkB;IAC3B;;IAEA;IACA;IACA;IACA;IACA;IACA,IAAI;MACF,MAAMH,eAAe,CAACI,WAAW,CAAC,CAAC;IACrC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAMC,YAAY,GAAGC,MAAM,CAACC,MAAM,CAACH,KAAK,CAAC;MACzCC,YAAY,CAACG,OAAO,GAAG,iBAAiBH,YAAY,CAACG,OAAO,EAAE;MAC9D;MACAH,YAAY,CAACI,MAAM,GAAGP,kBAAkB;MACxC,OAAOQ,OAAO,CAACC,MAAM,CAACN,YAAY,CAAC;IACrC;;IAEA;IACA;IACAH,kBAAkB,CAACU,OAAO,CAAC,gBAAgB,CAAC,GAAG,IAAI;IACnD,OAAOV,kBAAkB;EAC3B,CAAC;EAED,OAAOD,WAAW;AACpB,CAAC;AAED,eAAeJ,iCAAiC","ignoreList":[]}