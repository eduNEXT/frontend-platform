{"version":3,"file":"AuthenticatedPageRoute.js","names":["React","useContext","PropTypes","useRouteMatch","AppContext","PageRoute","getLoginRedirectUrl","AuthenticatedPageRoute","redirectUrl","props","authenticatedUser","match","path","exact","strict","sensitive","destination","global","location","href","assign","propTypes","string","defaultProps"],"sources":["../../src/react/AuthenticatedPageRoute.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport AppContext from './AppContext';\nimport PageRoute from './PageRoute';\nimport { getLoginRedirectUrl } from '../auth';\n\n/**\n * A react-router route that redirects to the login page when the route becomes active and the user\n * is not authenticated.  If the application has been initialized with `requireAuthenticatedUser`\n * false, an authenticatedPageRoute can be used to protect a subset of the application's routes,\n * rather than the entire application.\n *\n * It can optionally accept an override URL to redirect to instead of the login page.\n *\n * Like a `PageRoute`, also calls `sendPageEvent` when the route becomes active.\n *\n * @see PageRoute\n * @see {@link module:frontend-platform/analytics~sendPageEvent}\n * @memberof module:React\n * @param {Object} props\n * @param {string} props.redirectUrl The URL anonymous users should be redirected to, rather than\n * viewing the route's contents.\n */\nexport default function AuthenticatedPageRoute({ redirectUrl, ...props }) {\n  const { authenticatedUser } = useContext(AppContext);\n\n  const match = useRouteMatch({\n    // eslint-disable-next-line react/prop-types\n    path: props.path,\n    // eslint-disable-next-line react/prop-types\n    exact: props.exact,\n    // eslint-disable-next-line react/prop-types\n    strict: props.strict,\n    // eslint-disable-next-line react/prop-types\n    sensitive: props.sensitive,\n  });\n\n  if (authenticatedUser === null) {\n    if (match) {\n      const destination = redirectUrl || getLoginRedirectUrl(global.location.href);\n      global.location.assign(destination);\n    }\n    // This emulates a Route's way of displaying nothing if the route's path doesn't match the\n    // current URL.\n    return null;\n  }\n  return (\n    <PageRoute {...props} />\n  );\n}\n\nAuthenticatedPageRoute.propTypes = {\n  redirectUrl: PropTypes.string,\n};\n\nAuthenticatedPageRoute.defaultProps = {\n  redirectUrl: null,\n};\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,aAAa,QAAQ,kBAAkB;AAEhD,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,SAAS,MAAM,aAAa;AACnC,SAASC,mBAAmB,QAAQ,SAAS;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,sBAAsB,OAA4B;EAAA,IAAzBC,WAAW,QAAXA,WAAW;IAAKC,KAAK;EACpE,kBAA8BR,UAAU,CAACG,UAAU,CAAC;IAA5CM,iBAAiB,eAAjBA,iBAAiB;EAEzB,IAAMC,KAAK,GAAGR,aAAa,CAAC;IAC1B;IACAS,IAAI,EAAEH,KAAK,CAACG,IAAI;IAChB;IACAC,KAAK,EAAEJ,KAAK,CAACI,KAAK;IAClB;IACAC,MAAM,EAAEL,KAAK,CAACK,MAAM;IACpB;IACAC,SAAS,EAAEN,KAAK,CAACM;EACnB,CAAC,CAAC;EAEF,IAAIL,iBAAiB,KAAK,IAAI,EAAE;IAC9B,IAAIC,KAAK,EAAE;MACT,IAAMK,WAAW,GAAGR,WAAW,IAAIF,mBAAmB,CAACW,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;MAC5EF,MAAM,CAACC,QAAQ,CAACE,MAAM,CAACJ,WAAW,CAAC;IACrC;IACA;IACA;IACA,OAAO,IAAI;EACb;EACA,oBACE,oBAAC,SAAS,EAAKP,KAAK,CAAI;AAE5B;AAEAF,sBAAsB,CAACc,SAAS,GAAG;EACjCb,WAAW,EAAEN,SAAS,CAACoB;AACzB,CAAC;AAEDf,sBAAsB,CAACgB,YAAY,GAAG;EACpCf,WAAW,EAAE;AACf,CAAC"}