{"version":3,"file":"useParagonThemeUrls.js","names":["useMemo","handleVersionSubstitution","useParagonThemeUrls","config","PARAGON_THEME_URLS","undefined","paragonThemeUrls","paragonCoreCssUrl","core","urls","default","url","brandCoreCssUrl","brandOverride","defaultThemeVariants","defaults","localParagonVersion","PARAGON_THEME","paragon","version","localBrandVersion","brand","coreCss","wildcardKeyword","localVersion","themeVariantsCss","themeVariantsEntries","Object","entries","variants","forEach","_ref","themeVariant","themeVariantMetadata","hasMissingCssUrls","keys","length","themeVariants","baseUrl","BASE_URL","window","location","origin","prependBaseUrl","_ref3","_ref2","fileName","rest","_objectWithoutProperties","_excluded","_objectSpread"],"sources":["../../../../src/react/hooks/paragon/useParagonThemeUrls.js"],"sourcesContent":["import { useMemo } from 'react';\nimport { handleVersionSubstitution } from './utils';\n\n/**\n * Returns an object containing the URLs for the theme's core CSS and any theme variants.\n *\n * @param {*} config\n * @returns {ParagonThemeUrls|undefined} An object containing the URLs for the theme's core CSS and any theme variants.\n */\nconst useParagonThemeUrls = (config) => useMemo(() => {\n  if (!config?.PARAGON_THEME_URLS) {\n    return undefined;\n  }\n  const paragonThemeUrls = config.PARAGON_THEME_URLS;\n  const paragonCoreCssUrl = typeof paragonThemeUrls.core.urls === 'object' ? paragonThemeUrls.core.urls.default : paragonThemeUrls.core.url;\n  const brandCoreCssUrl = typeof paragonThemeUrls.core.urls === 'object' ? paragonThemeUrls.core.urls.brandOverride : undefined;\n  const defaultThemeVariants = paragonThemeUrls.defaults;\n\n  // Local versions of @edx/paragon and @edx/brand\n  const localParagonVersion = PARAGON_THEME?.paragon?.version;\n  const localBrandVersion = PARAGON_THEME?.brand?.version;\n\n  const coreCss = {\n    default: handleVersionSubstitution({ url: paragonCoreCssUrl, wildcardKeyword: '$paragonVersion', localVersion: localParagonVersion }),\n    brandOverride: handleVersionSubstitution({ url: brandCoreCssUrl, wildcardKeyword: '$brandVersion', localVersion: localBrandVersion }),\n  };\n\n  const themeVariantsCss = {};\n  const themeVariantsEntries = Object.entries(paragonThemeUrls.variants || {});\n  themeVariantsEntries.forEach(([themeVariant, { url, urls }]) => {\n    const themeVariantMetadata = { urls: null };\n    if (url) {\n      themeVariantMetadata.urls = {\n        default: handleVersionSubstitution({\n          url,\n          wildcardKeyword: '$paragonVersion',\n          localVersion: localParagonVersion,\n        }),\n      };\n    } else {\n      themeVariantMetadata.urls = {\n        default: handleVersionSubstitution({\n          url: urls.default,\n          wildcardKeyword: '$paragonVersion',\n          localVersion: localParagonVersion,\n        }),\n        brandOverride: handleVersionSubstitution({\n          url: urls.brandOverride,\n          wildcardKeyword: '$brandVersion',\n          localVersion: localBrandVersion,\n        }),\n      };\n    }\n    themeVariantsCss[themeVariant] = themeVariantMetadata;\n  });\n\n  const hasMissingCssUrls = !coreCss.default || Object.keys(themeVariantsCss).length === 0;\n  if (hasMissingCssUrls) {\n    if (!PARAGON_THEME) {\n      return undefined;\n    }\n    const themeVariants = {};\n    const baseUrl = config.BASE_URL || window.location?.origin;\n    const prependBaseUrl = (url) => `${baseUrl}/${url}`;\n    themeVariantsEntries.forEach(([themeVariant, { fileName, ...rest }]) => {\n      themeVariants[themeVariant] = {\n        url: prependBaseUrl(fileName),\n        ...rest,\n      };\n    });\n    return {\n      core: { urls: coreCss },\n      defaults: defaultThemeVariants,\n      variants: themeVariants,\n    };\n  }\n\n  return {\n    core: { urls: coreCss },\n    defaults: defaultThemeVariants,\n    variants: themeVariantsCss,\n  };\n}, [config?.BASE_URL, config?.PARAGON_THEME_URLS]);\n\nexport default useParagonThemeUrls;\n"],"mappings":"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","ignoreList":[]}