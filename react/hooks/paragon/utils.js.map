{"version":3,"file":"utils.js","names":["getConfig","basename","SELECTED_THEME_VARIANT_KEY","removeExistingLinks","existingLinks","forEach","link","remove","getDefaultThemeVariant","_ref","themeVariants","themeVariantDefaults","undefined","themeVariantKeys","Object","keys","length","themeVariantKey","name","metadata","persistedSelectedParagonThemeVariant","localStorage","getItem","hasDarkSystemPreference","window","matchMedia","matches","defaultDarkThemeVariant","dark","darkThemeVariantMetadata","defaultLightThemeVariant","light","lightThemeVariantMetadata","fallbackThemeUrl","url","baseUrl","BASE_URL","location","origin","handleVersionSubstitution","_ref2","wildcardKeyword","localVersion","includes","replaceAll","isEmptyObject","obj"],"sources":["../../../../src/react/hooks/paragon/utils.js"],"sourcesContent":["import { getConfig } from '../../../config';\nimport { basename } from '../../../initialize';\nimport { SELECTED_THEME_VARIANT_KEY } from '../../constants';\n\n/**\n * Iterates through each given `<link>` element and removes it from the DOM.\n * @param {HTMLLinkElement[]} existingLinks\n */\nexport const removeExistingLinks = (existingLinks) => {\n  existingLinks.forEach((link) => {\n    link.remove();\n  });\n};\n\n/**\n* Finds the default theme variant from the given theme variants object. If no default theme exists, the first theme\n* variant is returned as a fallback.\n* @param {Object.<string, ParagonThemeVariant>|undefined} themeVariants\n*\n* @returns {ParagonThemeVariant|undefined} The default theme variant.\n*/\nexport const getDefaultThemeVariant = ({ themeVariants, themeVariantDefaults = {} }) => {\n  if (!themeVariants) {\n    return undefined;\n  }\n\n  const themeVariantKeys = Object.keys(themeVariants);\n\n  // Return early if there are no theme variants configured.\n  if (themeVariantKeys.length === 0) {\n    return undefined;\n  }\n  // If there is only one theme variant, return it since it's the only one that may be used.\n  if (themeVariantKeys.length === 1) {\n    const themeVariantKey = themeVariantKeys[0];\n    return {\n      name: themeVariantKey,\n      metadata: themeVariants[themeVariantKey],\n    };\n  }\n  // There's more than one theme variant configured; figured out which one to display based on\n  // the following preference rules:\n  //   1. Get theme preference from localStorage.\n  //   2. Detect user system settings.\n  //   3. Use the default theme variant as configured.\n\n  // Prioritize persisted localStorage theme variant preference.\n  const persistedSelectedParagonThemeVariant = localStorage.getItem(SELECTED_THEME_VARIANT_KEY);\n  if (persistedSelectedParagonThemeVariant && themeVariants[persistedSelectedParagonThemeVariant]) {\n    return {\n      name: persistedSelectedParagonThemeVariant,\n      metadata: themeVariants[persistedSelectedParagonThemeVariant],\n    };\n  }\n\n  // Then, detect system preference via `prefers-color-scheme` media query and use\n  // the default dark theme variant, if one exists.\n  const hasDarkSystemPreference = !!window.matchMedia?.('(prefers-color-scheme: dark)')?.matches;\n  const defaultDarkThemeVariant = themeVariantDefaults.dark;\n  const darkThemeVariantMetadata = themeVariants[defaultDarkThemeVariant];\n\n  if (hasDarkSystemPreference && defaultDarkThemeVariant && darkThemeVariantMetadata) {\n    return {\n      name: defaultDarkThemeVariant,\n      metadata: darkThemeVariantMetadata,\n    };\n  }\n\n  const defaultLightThemeVariant = themeVariantDefaults.light;\n  const lightThemeVariantMetadata = themeVariants[defaultLightThemeVariant];\n\n  // Handle edge case where the default light theme variant is not configured or provided.\n  if (!defaultLightThemeVariant || !lightThemeVariantMetadata) {\n    return undefined;\n  }\n\n  // Otherwise, fallback to using the default light theme variant as configured.\n  return {\n    name: defaultLightThemeVariant,\n    metadata: lightThemeVariantMetadata,\n  };\n};\n\n/**\n* Creates the fallback URL for the given theme file.\n* @param {string} url The theme file path.\n* @returns {string} The default theme url.\n*/\nexport const fallbackThemeUrl = (url) => {\n  const baseUrl = getConfig().BASE_URL || window.location?.origin;\n  return `${baseUrl}${basename}${url}`;\n};\n\nexport const handleVersionSubstitution = ({ url, wildcardKeyword, localVersion }) => {\n  if (!url || !url.includes(wildcardKeyword) || !localVersion) {\n    return url;\n  }\n  return url.replaceAll(wildcardKeyword, localVersion);\n};\n\nexport const isEmptyObject = (obj) => !obj || Object.keys(obj).length === 0;\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,QAAQ,QAAQ,qBAAqB;AAC9C,SAASC,0BAA0B,QAAQ,iBAAiB;;AAE5D;AACA;AACA;AACA;AACA,OAAO,MAAMC,mBAAmB,GAAIC,aAAa,IAAK;EACpDA,aAAa,CAACC,OAAO,CAAEC,IAAI,IAAK;IAC9BA,IAAI,CAACC,MAAM,CAAC,CAAC;EACf,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAGC,IAAA,IAAkD;EAAA,IAAjD;IAAEC,aAAa;IAAEC,oBAAoB,GAAG,CAAC;EAAE,CAAC,GAAAF,IAAA;EACjF,IAAI,CAACC,aAAa,EAAE;IAClB,OAAOE,SAAS;EAClB;EAEA,MAAMC,gBAAgB,GAAGC,MAAM,CAACC,IAAI,CAACL,aAAa,CAAC;;EAEnD;EACA,IAAIG,gBAAgB,CAACG,MAAM,KAAK,CAAC,EAAE;IACjC,OAAOJ,SAAS;EAClB;EACA;EACA,IAAIC,gBAAgB,CAACG,MAAM,KAAK,CAAC,EAAE;IACjC,MAAMC,eAAe,GAAGJ,gBAAgB,CAAC,CAAC,CAAC;IAC3C,OAAO;MACLK,IAAI,EAAED,eAAe;MACrBE,QAAQ,EAAET,aAAa,CAACO,eAAe;IACzC,CAAC;EACH;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA,MAAMG,oCAAoC,GAAGC,YAAY,CAACC,OAAO,CAACpB,0BAA0B,CAAC;EAC7F,IAAIkB,oCAAoC,IAAIV,aAAa,CAACU,oCAAoC,CAAC,EAAE;IAC/F,OAAO;MACLF,IAAI,EAAEE,oCAAoC;MAC1CD,QAAQ,EAAET,aAAa,CAACU,oCAAoC;IAC9D,CAAC;EACH;;EAEA;EACA;EACA,MAAMG,uBAAuB,GAAG,CAAC,CAACC,MAAM,CAACC,UAAU,GAAG,8BAA8B,CAAC,EAAEC,OAAO;EAC9F,MAAMC,uBAAuB,GAAGhB,oBAAoB,CAACiB,IAAI;EACzD,MAAMC,wBAAwB,GAAGnB,aAAa,CAACiB,uBAAuB,CAAC;EAEvE,IAAIJ,uBAAuB,IAAII,uBAAuB,IAAIE,wBAAwB,EAAE;IAClF,OAAO;MACLX,IAAI,EAAES,uBAAuB;MAC7BR,QAAQ,EAAEU;IACZ,CAAC;EACH;EAEA,MAAMC,wBAAwB,GAAGnB,oBAAoB,CAACoB,KAAK;EAC3D,MAAMC,yBAAyB,GAAGtB,aAAa,CAACoB,wBAAwB,CAAC;;EAEzE;EACA,IAAI,CAACA,wBAAwB,IAAI,CAACE,yBAAyB,EAAE;IAC3D,OAAOpB,SAAS;EAClB;;EAEA;EACA,OAAO;IACLM,IAAI,EAAEY,wBAAwB;IAC9BX,QAAQ,EAAEa;EACZ,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB,GAAIC,GAAG,IAAK;EACvC,MAAMC,OAAO,GAAGnC,SAAS,CAAC,CAAC,CAACoC,QAAQ,IAAIZ,MAAM,CAACa,QAAQ,EAAEC,MAAM;EAC/D,OAAO,GAAGH,OAAO,GAAGlC,QAAQ,GAAGiC,GAAG,EAAE;AACtC,CAAC;AAED,OAAO,MAAMK,yBAAyB,GAAGC,KAAA,IAA4C;EAAA,IAA3C;IAAEN,GAAG;IAAEO,eAAe;IAAEC;EAAa,CAAC,GAAAF,KAAA;EAC9E,IAAI,CAACN,GAAG,IAAI,CAACA,GAAG,CAACS,QAAQ,CAACF,eAAe,CAAC,IAAI,CAACC,YAAY,EAAE;IAC3D,OAAOR,GAAG;EACZ;EACA,OAAOA,GAAG,CAACU,UAAU,CAACH,eAAe,EAAEC,YAAY,CAAC;AACtD,CAAC;AAED,OAAO,MAAMG,aAAa,GAAIC,GAAG,IAAK,CAACA,GAAG,IAAIhC,MAAM,CAACC,IAAI,CAAC+B,GAAG,CAAC,CAAC9B,MAAM,KAAK,CAAC","ignoreList":[]}